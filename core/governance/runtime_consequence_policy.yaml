# core/governance/runtime_consequence_policy.yaml
# Specification for deterministic remediation actions with TTL and rollback lifecycle.

version: "1.1"
rules:
  - id: "ram_pressure_remediation"
    match:
      action: "system_pressure_unresolved"
      level: "HIGH"
    condition:
      duration_minutes: 10
      min_events: 1
    consequences:
      - type: "throttle"
        target: "opal_api"
        ttl_seconds: 600
        params:
          rate_limit_percent: 50
      - type: "task_suppression"
        target: "task_dispatcher"
        ttl_seconds: 300
      - type: "emit_event"
        action: "resource_throttle_engaged"

  - id: "heartbeat_loss_remediation"
    match:
      action: "feed_anomaly"
      anomaly_type: "heartbeat_lost"
    condition:
      min_events: 1
    consequences:
      - type: "restart_component"
        target: "task_dispatcher"
        # Restarts are discrete, but we log the attempt
        ttl_seconds: 0
