# core/schema/task_spec_v2.yaml
# TaskSpec v2 - Advanced Agency Contract

version: 2

required:
  - task_id
  - author
  - intent
  - operations
properties:
  task_id:
    type: string
  author:
    type: string
    enum: [liam, gmx, boss]
  intent:
    type: string
  operations:
    type: array
    items:
      type: object
      required: [id, tool, params]
      properties:
        id: {type: string}
        tool: {type: string}
        params: {type: object}
        risk_hint: {type: string, enum: [low, high]}

optional:
  - hash
  - sot_ref
  - idempotency_key

rules:
  lane:
    allowed: ["task", "ops", "meta", "liam", "lisa"]
  created_at_utc:
    format: "iso8601_z"
  actor:
    allowed: ["liam", "lisa", "codex", "gmx", "gc", "human"]
  executor:
    allowed: ["liam", "lisa", "codex", "gmx", "gc", "shell"]

defaults:
  lane: "task"
  outputs_expected: {}
  reply_to: "interface/outbox/tasks"
